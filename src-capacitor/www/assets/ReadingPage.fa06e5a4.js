import{c as F,aa as ce,ab as de,a as n,h,u as ve,g as U,o as fe,aj as ke,k as pe,a8 as we,Q as P,ac as Ce,O as xe,r as _,ad as Be,ag as De,ah as Te,j as O,at as Qe,_ as Pe,au as Ve,f as Ee,x as M,y as J,z as x,J as z,A as y,C as N,D as Q,av as R,a7 as W,aw as Ae,G as He,H as Ne,I as Oe,F as Z}from"./index.f99b5f9f.js";import{Q as j,a as Fe}from"./QPageSticky.b4b97b7e.js";import{Q as Me}from"./QInput.9ede4e32.js";import{u as K,a as G}from"./use-dark.740bc772.js";import{Q as ee,a as Re,T as te}from"./QScrollObserver.23365c21.js";import{b as H}from"./format.801e7424.js";import{s as ae,j as le}from"./use-timeout.efb88233.js";import{Q as je,a as oe,b as Le,c as Ie,C as Ue}from"./ClosePopup.0b1c5a07.js";import{Q as Ke}from"./QPage.1b4495c9.js";import{u as Ge}from"./global.65aef719.js";import"./use-form.d592b7c7.js";import"./selection.5f06e24b.js";import"./axios.4d33b3f1.js";const Ye={xs:2,sm:4,md:6,lg:10,xl:14};function re(e,s,c){return{transform:s===!0?`translateX(${c.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var $e=F({name:"QLinearProgress",props:{...K,...ce,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:s}){const{proxy:c}=U(),l=G(e,c.$q),m=de(e,Ye),f=n(()=>e.indeterminate===!0||e.query===!0),o=n(()=>e.reverse!==e.query),t=n(()=>({...m.value!==null?m.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),g=n(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),q=n(()=>re(e.buffer!==void 0?e.buffer:1,o.value,c.$q)),k=n(()=>`q-linear-progress__track absolute-full q-linear-progress__track--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__track--${l.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),p=n(()=>re(f.value===!0?1:e.value,o.value,c.$q)),b=n(()=>`q-linear-progress__model absolute-full q-linear-progress__model--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__model--${f.value===!0?"in":""}determinate`),w=n(()=>({width:`${e.value*100}%`})),C=n(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"}`);return()=>{const u=[h("div",{class:k.value,style:q.value}),h("div",{class:b.value,style:p.value})];return e.stripe===!0&&f.value===!1&&u.push(h("div",{class:C.value,style:w.value})),h("div",{class:g.value,style:t.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ve(s.default,u))}}}),Xe=F({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:c}){let l=!1,m,f,o,t,g,q;function k(){m&&m(),m=null,l=!1,clearTimeout(o),clearTimeout(t),f!==void 0&&f.removeEventListener("transitionend",g),g=null}function p(u,i,v){u.style.overflowY="hidden",i!==void 0&&(u.style.height=`${i}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,l=!0,m=v}function b(u,i){u.style.overflowY=null,u.style.height=null,u.style.transition=null,k(),i!==q&&c(i)}function w(u,i){let v=0;f=u,l===!0?(k(),v=u.offsetHeight===u.scrollHeight?0:void 0):q="hide",p(u,v,i),o=setTimeout(()=>{u.style.height=`${u.scrollHeight}px`,g=S=>{(Object(S)!==S||S.target===u)&&b(u,"show")},u.addEventListener("transitionend",g),t=setTimeout(g,e.duration*1.1)},100)}function C(u,i){let v;f=u,l===!0?k():(q="show",v=u.scrollHeight),p(u,v,i),o=setTimeout(()=>{u.style.height=0,g=S=>{(Object(S)!==S||S.target===u)&&b(u,"hide")},u.addEventListener("transitionend",g),t=setTimeout(g,e.duration*1.1)},100)}return fe(()=>{l===!0&&k()}),()=>h(ke,{css:!1,appear:e.appear,onEnter:w,onLeave:C},s.default)}});const Je={xs:8,sm:10,md:14,lg:20,xl:24};var We=F({name:"QChip",props:{...K,...ce,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:s,emit:c}){const{proxy:{$q:l}}=U(),m=G(e,l),f=de(e,Je),o=n(()=>e.selected===!0||e.icon!==void 0),t=n(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),g=n(()=>e.iconRemove||l.iconSet.chip.remove),q=n(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),k=n(()=>{const i=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(i?` text-${i} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(q.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(m.value===!0?" q-chip--dark q-dark":"")}),p=n(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function b(i){i.keyCode===13&&w(i)}function w(i){e.disable||(c("update:selected",!e.selected),c("click",i))}function C(i){(i.keyCode===void 0||i.keyCode===13)&&(xe(i),e.disable===!1&&(c("update:modelValue",!1),c("remove")))}function u(){const i=[];q.value===!0&&i.push(h("div",{class:"q-focus-helper"})),o.value===!0&&i.push(h(P,{class:"q-chip__icon q-chip__icon--left",name:t.value}));const v=e.label!==void 0?[h("div",{class:"ellipsis"},[e.label])]:void 0;return i.push(h("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ce(s.default,v))),e.iconRight&&i.push(h(P,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&i.push(h(P,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:g.value,...p.value,onClick:C,onKeyup:C})),i}return()=>{if(e.modelValue===!1)return;const i={class:k.value,style:f.value};return q.value===!0&&Object.assign(i,p.value,{onClick:w,onKeyup:b}),pe("div",i,u(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[we,e.ripple]])}}});const ne=["vertical","horizontal"],L={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ie={prevent:!0,mouse:!0,mouseAllDir:!0};var Ze=F({name:"QScrollArea",props:{...K,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:s,emit:c}){const l=_(!1),m=_(!1),f=_(!1),o={vertical:_(0),horizontal:_(0)},t={vertical:{ref:_(null),position:_(0),size:_(0)},horizontal:{ref:_(null),position:_(0),size:_(0)}},g=U(),q=G(e,g.proxy.$q);let k,p;const b=_(null),w=n(()=>"q-scrollarea"+(q.value===!0?" q-scrollarea--dark":""));t.vertical.percentage=n(()=>{const a=t.vertical.size.value-o.vertical.value;if(a<=0)return 0;const r=H(t.vertical.position.value/a,0,1);return Math.round(r*1e4)/1e4}),t.vertical.thumbHidden=n(()=>(e.visible===null?f.value:e.visible)!==!0&&l.value===!1&&m.value===!1||t.vertical.size.value<=o.vertical.value+1),t.vertical.thumbStart=n(()=>t.vertical.percentage.value*(o.vertical.value-t.vertical.thumbSize.value)),t.vertical.thumbSize=n(()=>Math.round(H(o.vertical.value*o.vertical.value/t.vertical.size.value,50,o.vertical.value))),t.vertical.style=n(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${t.vertical.thumbStart.value}px`,height:`${t.vertical.thumbSize.value}px`})),t.vertical.thumbClass=n(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.vertical.barClass=n(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),t.horizontal.percentage=n(()=>{const a=t.horizontal.size.value-o.horizontal.value;if(a<=0)return 0;const r=H(t.horizontal.position.value/a,0,1);return Math.round(r*1e4)/1e4}),t.horizontal.thumbHidden=n(()=>(e.visible===null?f.value:e.visible)!==!0&&l.value===!1&&m.value===!1||t.horizontal.size.value<=o.horizontal.value+1),t.horizontal.thumbStart=n(()=>t.horizontal.percentage.value*(o.horizontal.value-t.horizontal.thumbSize.value)),t.horizontal.thumbSize=n(()=>Math.round(H(o.horizontal.value*o.horizontal.value/t.horizontal.size.value,50,o.horizontal.value))),t.horizontal.style=n(()=>({...e.thumbStyle,...e.horizontalThumbStyle,left:`${t.horizontal.thumbStart.value}px`,width:`${t.horizontal.thumbSize.value}px`})),t.horizontal.thumbClass=n(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.horizontal.barClass=n(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const C=n(()=>t.vertical.thumbHidden.value===!0&&t.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),u=[[te,a=>{Y(a,"vertical")},void 0,{vertical:!0,...ie}]],i=[[te,a=>{Y(a,"horizontal")},void 0,{horizontal:!0,...ie}]];function v(){const a={};return ne.forEach(r=>{const d=t[r];a[r+"Position"]=d.position.value,a[r+"Percentage"]=d.percentage.value,a[r+"Size"]=d.size.value,a[r+"ContainerSize"]=o[r].value}),a}const S=Be(()=>{const a=v();a.ref=g.proxy,c("scroll",a)},0);function B(a,r,d){if(ne.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?ae:le)(b.value,r,d)}function T({height:a,width:r}){let d=!1;o.vertical.value!==a&&(o.vertical.value=a,d=!0),o.horizontal.value!==r&&(o.horizontal.value=r,d=!0),d===!0&&V()}function he({position:a}){let r=!1;t.vertical.position.value!==a.top&&(t.vertical.position.value=a.top,r=!0),t.horizontal.position.value!==a.left&&(t.horizontal.position.value=a.left,r=!0),r===!0&&V()}function me({height:a,width:r}){t.horizontal.size.value!==r&&(t.horizontal.size.value=r,V()),t.vertical.size.value!==a&&(t.vertical.size.value=a,V())}function Y(a,r){const d=t[r];if(a.isFirst===!0){if(d.thumbHidden.value===!0)return;p=d.position.value,m.value=!0}else if(m.value!==!0)return;a.isFinal===!0&&(m.value=!1);const D=L[r],A=o[r].value,_e=(d.size.value-A)/(A-d.thumbSize.value),ze=a.distance[D.dist],qe=p+(a.direction===D.dir?1:-1)*ze*_e;X(qe,r)}function $(a,r){const d=t[r];if(d.thumbHidden.value!==!0){const D=a[L[r].offset];if(D<d.thumbStart.value||D>d.thumbStart.value+d.thumbSize.value){const A=D-d.thumbSize.value/2;X(A/o[r].value*d.size.value,r)}d.ref.value!==null&&d.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function be(a){$(a,"vertical")}function ge(a){$(a,"horizontal")}function V(){l.value===!0?clearTimeout(k):l.value=!0,k=setTimeout(()=>{l.value=!1},e.delay),e.onScroll!==void 0&&S()}function X(a,r){b.value[L[r].scroll]=a}function ye(){f.value=!0}function Se(){f.value=!1}Object.assign(g.proxy,{getScrollTarget:()=>b.value,getScroll:v,getScrollPosition:()=>({top:t.vertical.position.value,left:t.horizontal.position.value}),getScrollPercentage:()=>({top:t.vertical.percentage.value,left:t.horizontal.percentage.value}),setScrollPosition:B,setScrollPercentage(a,r,d){B(a,r*(t[a].size.value-o[a].value),d)}});let E=null;return De(()=>{E={top:t.vertical.position.value,left:t.horizontal.position.value}}),Te(()=>{if(E===null)return;const a=b.value;a!==null&&(le(a,E.left),ae(a,E.top))}),fe(S.cancel),()=>h("div",{class:w.value,onMouseenter:ye,onMouseleave:Se},[h("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[h("div",{class:"q-scrollarea__content absolute",style:C.value},ve(s.default,[h(ee,{debounce:0,onResize:me})])),h(Re,{axis:"both",onScroll:he})]),h(ee,{debounce:0,onResize:T}),h("div",{class:t.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:be}),h("div",{class:t.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:ge}),O(h("div",{ref:t.vertical.ref,class:t.vertical.thumbClass.value,style:t.vertical.style.value,"aria-hidden":"true"}),u),O(h("div",{ref:t.horizontal.ref,class:t.horizontal.thumbClass.value,style:t.horizontal.style.value,"aria-hidden":"true"}),i)])}}),se;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(se||(se={}));var ue;(function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"})(ue||(ue={}));const I=Qe("Keyboard"),et={setup(){const e=Ve(),s=Ge(),c=_("load");e.currentRoute.value.query.action&&(c.value=e.currentRoute.value.query.action);const l=_(""),m=_(null),f=new Audio("../mixkit-wrong-long-buzzer-954.wav"),o=_(!1),t=_(""),g=n(()=>{let v=s.aeinfo.lecturas.length;return s.aeinfo.lecturas.filter(B=>B.NroDS===!0).length/v}),q=n(()=>c.value==="load"?"upload":c.value==="download"?"download":"photo_camera"),k=n(()=>c.value==="load"?"Cargando":c.value==="download"?"Descargando":"Fotografiar"),p=n(()=>{let v=s.aeinfo.lecturas.length;return s.aeinfo.lecturas.filter(B=>B.NroDS===!0).length/v===1});I.addListener("keyboardWillShow",b),I.addListener("keyboardDidShow",b);function b(){l.value="",m.value.focus(),I.hide()}async function w(){let v={ae:s.aedocument,ud:l.value,empresa:s.customer};if(C(c.value)){if(c.value==="load"){const S=await s.uploadUnit(v);console.log(S),b()}if(c.value==="download"){const S=await s.downloadUnit(v);console.log(S),b()}}}function C(v){let B=s.aeinfo.lecturas.filter(T=>T.Descripcion===l.value);if(B.length>0){let T=B[0].NroDS;return v==="load"&&T===!0?(t.value="Esto ya esta cargado.",o.value=!0,f.play(),!1):v==="download"&&T===null?(t.value="Esto ya est\xE1 descargado",o.value=!0,f.play(),!1):!0}else return t.value="No pertenece a este pedido.",o.value=!0,f.play(),!1}function u(){f.play()}async function i(){await s.changeAE()!==void 0&&(t.value="Haz m\xEDnimo una foto",o.value=!0,f.play())}return Ee(()=>{b()}),{globalStore:s,action:c,radioIcons:q,radioText:k,barcode:l,returnFocus:b,barcodeinput:m,progress:g,readBarcode:w,alert:o,alertMsg:t,playError:u,nuevaEntrega:i,visibleEnd:p}}},tt={class:"text-center text-h5 text-weight-bold"},at={class:"text-center",style:{"font-size":"16px"}},lt={class:"q-pa-none",style:{"font-size":"16px"}},ot={class:"row items-center"},rt=z("div",{class:"col-3"},"Albar\xE1n",-1),nt={class:"col"},it={class:"row items-center"},st=z("div",{class:"col-3"},"Agencia",-1),ut={class:"col"},ct={class:"row items-center"},dt=z("div",{class:"col-3"},"Barras",-1),vt={class:"col"},ft={class:"q-pa-sm"},ht={class:"text-center q-pa-sm"},mt={class:"text-h5"},bt=N("Todo Cargado "),gt=z("div",{class:"text-h6"},"Error",-1);function yt(e,s,c,l,m,f){return M(),J(Ke,{class:"flex-center q-pa-md"},{default:x(()=>[z("div",tt,[y(P,{name:l.radioIcons},null,8,["name"]),N(" "+Q(l.radioText)+" "+Q(l.globalStore.customer)+" ",1),y(P,{name:l.radioIcons},null,8,["name"])]),z("div",at,[y(j,{modelValue:l.action,"onUpdate:modelValue":s[0]||(s[0]=o=>l.action=o),class:R(l.action==="load"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"load",label:"Cargar",onClick:l.returnFocus},null,8,["modelValue","class","onClick"]),y(j,{modelValue:l.action,"onUpdate:modelValue":s[1]||(s[1]=o=>l.action=o),class:R(l.action==="download"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"download",label:"Descargar",onClick:l.returnFocus},null,8,["modelValue","class","onClick"]),y(j,{modelValue:l.action,"onUpdate:modelValue":s[2]||(s[2]=o=>l.action=o),class:R(l.action==="photo"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"photo",label:"Fotografiar",onClick:s[3]||(s[3]=o=>this.$router.push("/photos"))},null,8,["modelValue","class"])]),z("div",lt,[z("div",ot,[rt,z("div",nt,Q(l.globalStore.aedocument),1)]),z("div",it,[st,z("div",ut,Q(l.globalStore.aeinfo.agencia.CodigoDeServicioDeTransporte),1)]),z("div",ct,[dt,z("div",vt,[y(Me,{class:"no-margin no-padding",dense:"",modelValue:l.barcode,"onUpdate:modelValue":s[4]||(s[4]=o=>l.barcode=o),ref:"barcodeinput",onKeyup:W(l.readBarcode,["enter"])},null,8,["modelValue","onKeyup"])])])]),z("div",ft,[y($e,{value:l.progress,rounded:"",stripe:"",size:"15px",color:"positive",class:"q-mt-sm"},null,8,["value"]),y(Xe,null,{default:x(()=>[O(z("div",ht,[z("span",mt,[bt,y(P,{color:"positive",name:"check_circle"})])],512),[[Ae,l.visibleEnd]])]),_:1}),y(Ze,{class:"q-pt-xs",style:{height:"38vh","max-width":"95vw"}},{default:x(()=>[(M(!0),He(Oe,null,Ne(l.globalStore.aeinfo.lecturas,o=>(M(),J(We,{size:"md",key:o.Descripcion,color:o.NroDS?l.action==="load"?"positive":"primary":"","text-color":"white"},{default:x(()=>[N(Q(o.Descripcion2),1)]),_:2},1032,["color"]))),128))]),_:1})]),y(Ie,{persistent:"",modelValue:l.alert,"onUpdate:modelValue":s[5]||(s[5]=o=>l.alert=o),onKeyup:W(l.playError,["enter"])},{default:x(()=>[y(je,null,{default:x(()=>[y(oe,null,{default:x(()=>[gt]),_:1}),y(oe,{class:"bg-negative text-white"},{default:x(()=>[N(Q(l.alertMsg),1)]),_:1}),y(Le,{align:"right"},{default:x(()=>[O(y(Z,{flat:"",label:"ENTENDIDO",color:"primary",onClick:l.returnFocus},null,8,["onClick"]),[[Ue]])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),y(Fe,{position:"bottom",offset:[0,18]},{default:x(()=>[y(Z,{style:{width:"95vw"},color:"accent","text-color":"white",label:"Cargar otra entrega","no-caps":"",onClick:l.nuevaEntrega},null,8,["onClick"])]),_:1})]),_:1})}var Pt=Pe(et,[["render",yt]]);export{Pt as default};

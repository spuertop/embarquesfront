import{a as o,P as a}from"./index.c6e9e2f2.js";import{api as r}from"./axios.81fe9a6a.js";const u={dark:{type:Boolean,default:null}};function c(t,e){return o(()=>t.dark===null?e.dark.isActive:t.dark)}const d=a("useGlobalStore",{persist:{storage:window.sessionStorage},state:()=>({usersList:[],userName:null,customersList:[],customer:null,aedocument:null,aeinfo:null,token:null,photoList:[]}),getters:{},actions:{async getAllusers(){try{const t=await r.get("/users/all");this.usersList=t.data}catch(t){return t.response.data.error}},async postLogIn(t){try{const e=await r.post("/users/login",t);sessionStorage.setItem("token",e.data.token),this.setHeaders(),this.router.push("/customers")}catch(e){return e.response.data.error}},setHeaders(){this.token=sessionStorage.getItem("token"),r.defaults.headers.common.Authorization=this.token},async getAllCustomers(){try{this.setHeaders();const t=await r.get("/customers/all");this.customersList=t.data}catch(t){return t.response.data.error}},setCustomer(t){this.customer=t,this.router.push("/documents")},async getDeliveryInfo(t){try{this.setHeaders();const e=await r.get("/delivery",{params:t});this.aeinfo=e.data,this.router.push("/readings")}catch(e){return e.response.data.error}},async uploadUnit(t){try{this.setHeaders();const e=await r.put("/upload",t);this.aeinfo.lecturas.map(s=>{s.Descripcion===t.ud&&(s.NroDS=!0)})}catch(e){return e.response.data.error}},async downloadUnit(t){try{this.setHeaders();const e=await r.put("/download",t);this.aeinfo.lecturas.map(s=>{s.Descripcion===t.ud&&(s.NroDS=null)})}catch(e){return e.response.data.error}},changeAE(){this.router.push("/documents")},async uploadPhoto(t){try{this.setHeaders(),await r.post("/postphoto",{customer:this.customer,aedocument:this.aedocument,photo:t})}catch(e){return e.response.data.error}},async getPhotos(){try{this.setHeaders(),this.photoList=[];const t=await r.get("/getphotos",{params:{ae:this.aedocument}});let e=1;for(let s=0;s<t.data.length;s++)this.photoList.push({id:e,src:"http://192.168.1.38:3000/"+this.aedocument+"/"+t.data[s]}),e++}catch(t){return t.response.data.error}}}});export{c as a,d as b,u};
